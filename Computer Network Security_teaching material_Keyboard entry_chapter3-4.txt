












   第三章没敲，直接从第4章开始 
   
   
   
    4.1
	防火墙是一种将内部网络和外部网络(例如Internet)分开的方法，是提供信息安全服务、实现网络和信息系统安全的重要基础设施，主要用于限制被保护的内部网络
	与外部网络之间进行的信息存取及信息传递等操作。防火墙可以作为不同网络或网络安全域之间信息的出入口，能根据安全策略控制出入网络的信息流，且本身具有
	较强的抗攻击能力。在逻辑上，防火墙是一个分离器，一个限制器，也是一个分析器，可有效地监控内部网络和外部网络之间的任何活动，保证内部网络的安全。 
	
	
	
	
	    4.1.1 防火墙的概念： 
		防火墙的本意是指古时候人们在住所之间修建的墙，这道墙可以在火灾发生时防止火势蔓延到其他住所。
		
		在计算机网络上，如果一个内部网络与Internet连接，内部网络就可以访问外部网络并与之通信。但同时，外部网络也同样可以访问该网络并与之
		交互。为安全起见，人们就系统在内部网络和Internet之间设置一个功能类似于古代防火墙的安全屏障。该安全屏障的作用是阻断来自外部网络对
		内部网络的威胁和入侵，提供扼守本网络的安全和审计的第一道关卡。由于这样的安全屏障的作用与古代的防火墙类似，因此人们习惯性地将其称为“防火墙”.  
		
		
		  防火墙是位于被保护网络和外部网络之间执行访问控制策略的一个或一组系统，包括硬件和软件，它构成一道屏障，以防止发生对被保护网络的不可预测的、
		  潜在破坏性的侵扰。它对两个网络之间的通信进行控制，通过强制实施统一的安全策略，限制外界用户对内部网络的访问，管理内部用户访问外部网络，防止
		  对重要信息资源的非法存取和访问，以达到保护内部网络系统安全的目的。
		  
		    防火墙配置在不同网络(如可信任的单位内部网络和不可信的公共网络)或网络安全域之间，本质上，它遵循的是一种允许或阻止业务来往的网络通信安全机制，
			也就是提供可控的过滤网络通信，只允许授权的通信，能根据单位的安全政策控制(允许、拒绝、检测)出入网络的信息流，尽可能地对外部屏蔽网络内部的信息、
			结构和运行状况，以此来实现内部网络的安全运行。 
			
			
			
			
			4.1.2 防火墙的功能 
			
			 防火墙是网络安全策略的有机组成部门，它通过控制和检测网络之间的信息交换和访问行为来实现对网络安全的有效管理。从基本要求上看，
			 防火墙还是在两个网络之间执行控制策略的系统(包括硬件和软件)，目的是不被非法用户侵入。它遵循的是一种允许或禁止业务来往的网络
			 通信安全机制，也就是提供可控的过滤网络通信，只允许授权的通信。因此，对数据和访问的控制、对网络活动的记录，是防火墙发挥作用的根本和关键。
			 
			 
			 无论各种类型的防火墙，从总体上看，都应具有五大基本功能： 过滤进、出网络的数据；
			 管理进、出网络的访问行为；
			 封堵某些禁止的业务；
			 记录通过防火墙的信息内容和活动；
			 对网络攻击的检测和告警。
			 
			 
			 1、 过滤进、 出网络的数据 
				防火墙是任何信息进出网络的必经之路，它检查所有数据的细节，并根据事先定义好的策略允许或禁止这些数据进行通信。
				这种强制性的集中实施安全策略的方法，更多的是考虑内部网络的整体安全共性，不为网络中的某一台计算机提供特殊的安全保护，简化了管理，提高了效率。
				
			2. 管理进、出网络的访问行为 
				网络数据的传输更多的是通过不同的网络访问服务而获取的，只要对这些网络访问服务加以限制，包括禁止存在安全脆弱性的服务进出网络，也能够达到安全目的。
				即通过将动态的、应用层的过滤能力和认证相结合，实现WWW、HTTP、FPT和 Telnet 等广泛的服务支持。
				
			...

4.1.3 防火墙的局限性 

		  防火墙的局限性主要体现在以下几个方面。
		  
		  1、 网络的安全通常是以网络服务的开放性和灵活性为代价
				在网络系统中部署防火墙，通常会使网络系统的部分功能被削弱。 
				 一、 由于防火墙的隔离作用，在保护内部网络的同时使它与外部网络的信息交流受到阻碍；
				 
				 二、 由于在防火墙上附加各种信息服务的代理软件，增大了网络管理开销，减慢了信息传输速率，在大量使用分布式应用的情况下，使用防火墙是不切实际的。
				 
				 
		  2、 防火墙只是整个网络安全防护体系的一部分，而且防火墙并非万无一失 
			1）只能防范经过其本身的非法访问和攻击，对绕过防火墙的访问和攻击无能为力；
			2） 不能解决受病毒感染的文件的传输。
			3） 不能防止受病毒感染的文件的传输。
			4） 不能防止策略配置不当或错误配置引起的安全威胁；
			5） 不能防止自然或人为的故意破坏；
			6） 不能防止本身安全漏洞的威胁；
			
			
			
			
			  4.2 防火墙体系结构 
			  
				 防火墙的目的在于实现安全访问控制，因此按照 OSI 模型的安全要求，防火墙可以在OSI 七层中的五层设置。防火墙从功能上分，通常由几个部分组成：(访问控制策略、
				 审计、安全管理、数据加密)
				 
				 
				 
				 目前，防火墙的体系结构一般有以下几种：
				   双重宿主主机体系结构；
				   屏蔽主机体系结构；
				   屏蔽子网体系结构。
				   
				   
				   
				   
				 4.2.1  双重宿主主机体系结构  

						双重宿主主机体系结构是围绕具有双重宿主的主机计算机而构筑的，该计算机至少有两个网络接口。这样的主机可以充当与这些接口相连的
						网络之间的路由器；它能够从一个网络往另一个网络发送IP数据包。然而，实现双重宿主主机的防火墙体系结构禁止这种发送功能。因而，IP数据包
						从一个网络(例如，互联网)并不是直接发送到其他网络(例如，内部的、被保护的网络)。防火墙内部的系统能与双重宿主主机通信，同时防火墙
						外部的系统能与双重宿主主机通信，但是这些系统不能直接互相通信，它们之间的IP通信被完全阻止。 
						
							双重宿主主机的防火墙体系结构是相当简单的：双重宿主主机位于两者之间，并且被连接到外部网络和内部的网络。  
							
				4.2.2  屏蔽主机体系结构 
						双重宿主主机体系结构是由一台同时连接在内外部网络的双重宿主主机提供安全保障的，而被屏蔽主机体系结构则不同，在屏蔽主机体系结构中，
						提供安全保护的主机仅仅与被保护的内部网络相连。屏蔽主机体系结构还使用一个单独的过滤路由器来提供主要安全。
						
						
						
						堡垒主机位于内部的网络上，是外部网络上的主机连接到内部网络上的系统的桥梁(例如，传送进来的电子邮件)。即使这样，也仅有某些确定类型的连接
						被允许，任何外部的系统试图访问内部的系统或者服务将必须连接到这台堡垒主机上。因此，堡垒主机需要拥有高等级的安全。
						
							数据包过滤也允许堡垒主机开放可允许的连接(什么是"可允许"将由用户站点的安全策略决定)到外部网络。
							
							在该结构的路由器中数据包过滤配置可以按下列方法执行。
							
							1） 允许其他的内部主机为了某些服务与外部网上的注记连接(即允许那些已经由数据包过滤的服务)。
							
							2） 不允许来自内部主机的所有连接(强迫那些主机经由堡垒主机使用代理服务)。用户可以针对不同的服务混合使用这些手段；
							某些服务可以被允许直接经由数据包过滤，而其他服务仅仅可以被允许间接地经过代理。这完全取决于用户实行的安全策略。 
							
							 因为这种体系结构允许数据包从外部网向内部网的移动，所以，它的设计比没有外部数据包能到达内部网络的双重宿主主机体系结构似乎是更冒风险。
							 但实际上，双重宿主主机体系结构在防备数据包从外部网络穿过内部的网络时，也容易产生失败(例如黑客侵袭)。另外，保护路由器比保护主机较易实现，
							 因为它提供非常有限的服务组。多数情况下，被屏蔽的主机体系结构提供比双重宿主主机体系结构更好的安全性和可用性。
							 
							 
							 
							 
							 
							 
							 
				4.2.3  屏蔽子网体系结构  
						屏蔽子网体系结构添加额外的安全层到屏蔽主机体系结构，即通过添加周边网络更进一步地把内部网络与Internet隔离开。 
						
						堡垒主机是用户的网络上最容易受侵袭的计算机。任凭用户尽最大的力气去保护它，它仍是最有可能被侵袭的计算机，因为它的本质决定了
						它是最容易被侵袭的。在屏蔽主机体系结构中，堡垒主机是非常诱人的攻击目标，因为它一旦被攻破，那么被保护的内部网络就会在外部入侵者
						面前门户洞开，在堡垒主机与内部网络的其他内部计算机之间没有其他的防御手段(除了它们可能有的通常非常少的主机安全之外)。如果有人成功地
						侵入屏蔽主机体系结构中的堡垒主机，那就毫无阻拦地进入了内部系统。 
						
							通过用周边网络隔离堡垒主机，能减少堡垒主机被入侵造成的影响。可以说，它只给入侵者一些访问的机会，但不是全部。屏蔽子网体系结构的最简单
							的形式为两个屏蔽路由器，每一个都连接到周边网。一个位于周边网与被保护的内部网络之间，另一个位于周边网与外部网络之间(通常为Internet) 
							
							
							
							
							为了侵入用这种类型的体系结构保护的内部网络，侵袭着必须要通过两个路由器。即使侵袭着设法侵入堡垒主机，他将仍然必须通过内部路由器。   
							
							下面介绍在这种结构里所采用的组件 
							1. 周边网络 
								周边网络是另一个安全层，是在外部网络与用户的被保护的内部网络之间附加的网络。如果侵袭者成功地侵入用户的防火墙的外层领域，周边网络
								在那个侵袭者与用户的内部系统之间提供一个附加的保护层。
								
								对于周边网络的作用举例说明如下。 
								在许多网络设置中，用给定网络上的任何计算机来查看这个网络上的每一台计算机的通信是可能的，对大多数以以太网为基础的网络确实如此(而且以太网
								是当今使用最广泛的局域网技术)；对若干其他成熟的技术，诸如令牌环和FDDI也是如此。 
								
								
							
							
							
				
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			